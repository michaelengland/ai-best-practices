# Deck Visual Overhaul — Implementation Plan

> **For Claude:** Use **/deck-flow:present** to implement this deck plan.

**Goal:** Transform the 47-slide AI best-practices presentation from a flat, template-feeling design to a dark-forward cinematic deck with dramatic typography, clear information hierarchy, imagery placeholders, and pacing variation.

**Architecture:** The entire presentation is generated by a single Node.js script (`generate-deck.js`) using PptxGenJS. The overhaul modifies the design system constants, utility functions, and every slide's implementation. No new files are created — it's a rewrite of the existing ~1284-line script.

**Tech Stack:** PptxGenJS, Node.js, react-icons, sharp (for icon rasterization)

**Deck plan:** `docs/plans/2026-02-19-deck-visual-overhaul-deck-plan.md` — read this first for full design rationale.

---

## Important Notes

- **No TDD** — this is a presentation generator, not an app. "Testing" = content QA via `python -m markitdown` + visual inspection.
- **PptxGenJS pitfalls** — never use `#` in hex colors; never reuse shadow/option objects (create fresh via factory functions); use `bullet: true` not unicode bullets; use `breakLine: true` between text array items.
- **Shadow factory** — always use `sh()` to create fresh shadow objects. Never share a shadow object between multiple `addShape`/`addText` calls.
- **Glow shape** — must be added FIRST on dark slides so it renders behind all other elements.
- **Slide coordinates** — LAYOUT_16x9 = 10" × 5.625". All x/y/w/h in inches.
- **Commit after each task** — the script should generate successfully at each checkpoint.

---

### Task 1: Update Design System Constants

**Files:**
- Modify: `generate-deck.js:14-20` (the `D` object)

**Step 1: Update the D constant object**

Replace the current D object with:

```javascript
const D = {
  // Backgrounds
  darkBg: "0F0F1A", lightBg: "F8F9FA",
  // Cards
  darkCard: "1A1A3E", card: "FFFFFF",
  // Accent
  accent: "00B4D8", accentDark: "0891B2",
  // Text on dark
  textDark: "E0E4E8", mutedDark: "94A3B8",
  // Text on light
  text: "1E293B", muted: "64748B",
  // White (headlines on dark)
  white: "FFFFFF",
  // Wrong/Right
  wrong: "E63946", wrongBg: "FEE2E2", right: "2D936C", rightBg: "DCFCE7",
  // Table
  tableBorder: "D1D5DB", tableHead: "E5E7EB",
  // Fonts
  h: "Georgia", b: "Calibri",
};
```

Key changes: `darkBg` is now deeper (`0F0F1A` vs `1A1A2E`). Added `textDark` and `mutedDark` for dark-background text. `text` changed to `1E293B` (slate-900). `lightBg` changed to `F8F9FA`. `darkCard` changed to `1A1A3E`.

**Step 2: Run the script to verify it still generates**

Run: `node generate-deck.js`
Expected: Generates successfully (though colors will look off until utilities are updated)

**Step 3: Commit**

```bash
git add generate-deck.js
git commit -m "refactor: update design system constants for visual overhaul"
```

---

### Task 2: Rewrite Utility Functions

**Files:**
- Modify: `generate-deck.js:22-196` (all utility functions)

This is the foundation — every slide depends on these helpers. The new functions must support dark-forward design, the three-tier footer, glass cards, callout strips, and breather slides.

**Step 1: Update darkSlide to add radial glow**

```javascript
function darkSlide(pres) {
  const s = pres.addSlide();
  s.background = { color: D.darkBg };
  // Radial glow — bottom-right quadrant, creates depth
  s.addShape(pres.shapes.OVAL, {
    x: 5, y: 2.5, w: 8, h: 6,
    fill: { color: D.accent, transparency: 96 }
  });
  return s;
}
```

Light slide stays similar but with updated color:
```javascript
function lightSlide(pres) {
  const s = pres.addSlide();
  s.background = { color: D.lightBg };
  return s;
}
```

**Step 2: Rewrite addHeadline for 40pt typography**

```javascript
// isDark parameter determines text color
function addHeadline(s, text, opts = {}) {
  const isDark = opts.dark !== undefined ? opts.dark : false;
  s.addText(text, {
    x: 0.5, y: 0.3, w: 9, h: 0.8, fontFace: D.h, fontSize: opts.fontSize || 40,
    bold: true, color: isDark ? D.white : D.text, align: opts.align || "left",
    margin: 0, ...opts, dark: undefined  // spread opts but remove 'dark' flag
  });
}
```

Note: `addHeadline` now defaults to 40pt (was 28pt). Pass `{ dark: true }` for white text on dark backgrounds. The height increased from 0.6 to 0.8 to accommodate the larger font.

**Step 3: Replace addFooter and addSource with three-tier footer system**

Remove the old `addFooter` and `addSource` functions entirely. Replace with:

```javascript
// Tier 1: Takeaway callout — the one line the audience should remember
function addTakeaway(s, text, opts = {}) {
  const isDark = opts.dark || false;
  // Tinted background strip
  s.addShape(s._slideLayout ? undefined : pres.shapes.RECTANGLE, {
    x: 0.3, y: 4.5, w: 9.4, h: 0.45,
    fill: { color: D.accent, transparency: isDark ? 88 : 92 }
  });
  s.addText(text, {
    x: 0.5, y: 4.5, w: 9, h: 0.45, fontFace: D.b, fontSize: 14,
    color: D.accent, bold: true, margin: 0, valign: "middle"
  });
}

// Tier 2: Separator line (call only when there's a source below)
function addFooterSep(s, opts = {}) {
  const isDark = opts.dark || false;
  s.addShape(pres.shapes.LINE, {
    x: 0.5, y: 5.1, w: 9, h: 0,
    line: { color: isDark ? "FFFFFF" : "94A3B8", width: 0.5, transparency: isDark ? 92 : 80 }
  });
}

// Tier 3: Source citation — metadata only
function addSourceCite(s, text, opts = {}) {
  const isDark = opts.dark || false;
  addFooterSep(s, opts);
  s.addText(text, {
    x: 0.5, y: 5.15, w: 9, h: 0.3, fontFace: D.b, fontSize: 9,
    color: D.muted, align: "right", margin: 0
  });
}
```

**Important:** The `addTakeaway` function needs access to `pres` for `pres.shapes.RECTANGLE`. Since the helpers are defined outside `main()`, we need to either:
- Move them inside `main()`, or
- Pass `pres` as a parameter (like `addCard` already does)

**Decision:** Pass `pres` to `addTakeaway` and `addFooterSep` as a parameter, matching the existing `addCard` pattern.

Updated signatures:
```javascript
function addTakeaway(pres, s, text, opts = {})
function addFooterSep(pres, s, opts = {})
function addSourceCite(pres, s, text, opts = {})
```

**Step 4: Add new card variants**

```javascript
// Standard card (existing, updated for dark bg default)
function addCard(pres, s, x, y, w, h, fill) {
  s.addShape(pres.shapes.RECTANGLE, {
    x, y, w, h,
    fill: { color: fill || D.card },
    shadow: sh()
  });
}

// Dark card (for dark backgrounds)
function addDarkCard(pres, s, x, y, w, h) {
  s.addShape(pres.shapes.RECTANGLE, {
    x, y, w, h,
    fill: { color: D.darkCard },
    shadow: sh()
  });
}

// Glass card (semi-transparent, for dark backgrounds)
function addGlassCard(pres, s, x, y, w, h) {
  s.addShape(pres.shapes.RECTANGLE, {
    x, y, w, h,
    fill: { color: "FFFFFF", transparency: 95 },
    line: { color: "FFFFFF", width: 0.5, transparency: 85 }
  });
}
```

**Step 5: Add breather slide helper**

```javascript
function breatherSlide(pres, text, notes) {
  const s = darkSlide(pres);
  s.addText(text, {
    x: 1.5, y: 2.0, w: 7, h: 1.6,
    fontFace: D.h, fontSize: 28, color: D.accent, italic: true,
    align: "center", margin: 0, valign: "middle"
  });
  if (notes) s.addNotes(notes);
  return s;
}
```

**Step 6: Update sectionDivider for hero typography**

```javascript
function sectionDivider(pres, d) {
  const s = darkSlide(pres);
  if (d.level) {
    s.addText(d.level, {
      x: 0.5, y: 1.0, w: 9, h: 0.5, fontFace: D.b, fontSize: 11,
      color: D.mutedDark, bold: true, margin: 0, align: "center",
      charSpacing: 4
    });
  }
  s.addText(d.title, {
    x: 0.5, y: 1.6, w: 9, h: 1.4, fontFace: D.h, fontSize: 54,
    color: D.white, bold: true, align: "center", margin: 0
  });
  if (d.subtitle) {
    s.addText(d.subtitle, {
      x: 1.0, y: 3.1, w: 8, h: 0.6, fontFace: D.b, fontSize: 20,
      color: D.accent, italic: true, align: "center", margin: 0
    });
  }
  if (d.small) {
    s.addText(d.small, {
      x: 1.5, y: 3.8, w: 7, h: 0.8, fontFace: D.b, fontSize: 13,
      color: D.mutedDark, italic: true, align: "center", margin: 0
    });
  }
  s.addNotes(d.notes || "");
  return s;
}
```

Key changes: level label uses charSpacing: 4 for tracked-out small-caps look (11pt, mutedDark). Title is now 54pt (was 36pt). Subtitle 20pt (was 18pt).

**Step 7: Update singleMsg for cinematic mode**

```javascript
function singleMsg(pres, d) {
  const s = d.dark !== false ? darkSlide(pres) : lightSlide(pres);
  const isDark = d.dark !== false;
  const textColor = isDark ? D.textDark : D.text;
  if (d.headline) addHeadline(s, d.headline, { color: textColor, dark: isDark });
  const mainY = d.headline ? 1.5 : (d.sub ? 1.8 : 2.2);
  s.addText(d.main, {
    x: 1.0, y: mainY, w: 8, h: 1.6,
    fontFace: D.h, fontSize: d.mainSize || 26, color: isDark ? D.white : D.text,
    bold: true, align: "center", margin: 0, valign: "middle"
  });
  if (d.sub) {
    s.addText(d.sub, {
      x: 1.0, y: mainY + 1.8, w: 8, h: 1.2,
      fontFace: D.b, fontSize: 16, color: isDark ? D.mutedDark : D.muted,
      italic: true, align: "center", margin: 0, valign: "top"
    });
  }
  if (d.takeaway) addTakeaway(pres, s, d.takeaway, { dark: isDark });
  if (d.source) addSourceCite(pres, s, d.source, { dark: isDark });
  s.addNotes(d.notes || "");
  return s;
}
```

Key changes: Default is now dark (not light). `mainSize` default up to 26 (was 24). `sub` text up to 16pt. Uses new `addTakeaway` and `addSourceCite` instead of `addFooter`/`addSource`. `d.footer` becomes `d.takeaway`. `d.sources` becomes `d.source`.

**Step 8: Update wrongRight helper**

The Wrong/Right slides stay on LIGHT backgrounds (red/green needs contrast). But update typography and footer:

```javascript
function wrongRight(pres, d) {
  const s = lightSlide(pres);
  s.addText([
    { text: d.headline, options: { bold: true, fontFace: D.h, fontSize: 36, color: D.text } },
    { text: " — " + d.subtitle, options: { italic: true, fontFace: D.b, fontSize: 16, color: D.muted } }
  ], { x: 0.5, y: 0.2, w: 9, h: 0.7, margin: 0 });
  // Left card
  addCard(pres, s, 0.5, 1.0, 4.25, 3.2, D.wrongBg);
  addBar(pres, s, 0.5, 1.0, 3.2, D.wrong);
  s.addText("THE WRONG WAY", {
    x: 0.75, y: 1.05, w: 3.8, h: 0.3, fontFace: D.b, fontSize: 10,
    color: D.wrong, bold: true, margin: 0, charSpacing: 2
  });
  s.addText([
    { text: d.wrongPrompt, options: { breakLine: true, fontFace: D.b, fontSize: 14, color: D.text, italic: true } },
    { text: "", options: { breakLine: true, fontSize: 6 } },
    { text: d.wrongLabel, options: { fontFace: D.b, fontSize: 13, color: D.muted } }
  ], { x: 0.75, y: 1.4, w: 3.8, h: 2.6, fontFace: D.b, fontSize: 14, color: D.text, margin: 0, valign: "top" });
  // Right card
  addCard(pres, s, 5.25, 1.0, 4.25, 3.2, D.rightBg);
  addBar(pres, s, 5.25, 1.0, 3.2, D.right);
  s.addText("THE FIX", {
    x: 5.5, y: 1.05, w: 3.8, h: 0.3, fontFace: D.b, fontSize: 10,
    color: D.right, bold: true, margin: 0, charSpacing: 2
  });
  s.addText([
    { text: d.rightPrompt, options: { breakLine: true, fontFace: D.b, fontSize: 14, color: D.text, italic: true } },
    { text: "", options: { breakLine: true, fontSize: 6 } },
    { text: d.rightLabel, options: { fontFace: D.b, fontSize: 13, color: D.muted } }
  ], { x: 5.5, y: 1.4, w: 3.8, h: 2.6, fontFace: D.b, fontSize: 14, color: D.text, margin: 0, valign: "top" });
  // Footer system
  if (d.takeaway) addTakeaway(pres, s, d.takeaway);
  if (d.source) addSourceCite(pres, s, d.source);
  s.addNotes(d.notes || "");
  return s;
}
```

Key changes: headline bumped to 36pt (was 28), body text to 14pt (was 13), card labels get charSpacing: 2. Footer replaced with takeaway/source system. Card height reduced to 3.2 (from 3.3) to leave room for takeaway strip.

**Step 9: Update twoCol helper**

Similar to wrongRight — keep on light bg for comparison slides, update typography and footer:

```javascript
function twoCol(pres, d) {
  const isDark = d.dark || false;
  const s = isDark ? darkSlide(pres) : lightSlide(pres);
  addHeadline(s, d.headline, { dark: isDark });
  const cardH = 3.4;
  const cardFill = isDark ? D.darkCard : D.card;
  addCard(pres, s, 0.5, 1.2, 4.25, cardH, d.leftBg || cardFill);
  if (d.leftAccent) addBar(pres, s, 0.5, 1.2, cardH, d.leftAccent);
  const lx = d.leftAccent ? 0.75 : 0.7;
  const bodyColor = isDark ? D.textDark : D.text;
  if (d.leftTitle) s.addText(d.leftTitle, { x: lx, y: 1.3, w: 3.85, h: 0.35, fontFace: D.h, fontSize: 18, color: d.leftTitleColor || bodyColor, bold: true, margin: 0 });
  const ly = d.leftTitle ? 1.7 : 1.3, lh = d.leftTitle ? 2.7 : 3.1;
  s.addText(d.leftContent, { x: lx, y: ly, w: 3.85, h: lh, fontFace: D.b, fontSize: 15, color: bodyColor, margin: 0, valign: "top" });
  addCard(pres, s, 5.25, 1.2, 4.25, cardH, d.rightBg || cardFill);
  if (d.rightAccent) addBar(pres, s, 5.25, 1.2, cardH, d.rightAccent);
  const rx = d.rightAccent ? 5.5 : 5.45;
  if (d.rightTitle) s.addText(d.rightTitle, { x: rx, y: 1.3, w: 3.85, h: 0.35, fontFace: D.h, fontSize: 18, color: d.rightTitleColor || bodyColor, bold: true, margin: 0 });
  const ry = d.rightTitle ? 1.7 : 1.3, rh = d.rightTitle ? 2.7 : 3.1;
  s.addText(d.rightContent, { x: rx, y: ry, w: 3.85, h: rh, fontFace: D.b, fontSize: 15, color: bodyColor, margin: 0, valign: "top" });
  if (d.takeaway) addTakeaway(pres, s, d.takeaway, { dark: isDark });
  if (d.source) addSourceCite(pres, s, d.source, { dark: isDark });
  s.addNotes(d.notes || "");
  return s;
}
```

Key changes: supports `dark` flag, body text 15pt (was 14), title 18pt (was 16), card positions adjusted for larger headline, footer replaced with takeaway/source.

**Step 10: Update bulletSlide helper**

```javascript
function bulletSlide(pres, d) {
  const isDark = d.dark || false;
  const s = isDark ? darkSlide(pres) : lightSlide(pres);
  addHeadline(s, d.headline, { dark: isDark });
  const bodyColor = isDark ? D.textDark : D.text;
  const sz = d.bullets.length <= 5 ? 18 : 16;
  const richItems = [];
  d.bullets.forEach((b, i) => {
    if (typeof b === "object" && b.head) {
      richItems.push({ text: b.head + " ", options: { bold: true, fontFace: D.b, fontSize: sz, color: bodyColor, bullet: true, breakLine: false } });
      richItems.push({ text: b.body, options: { fontFace: D.b, fontSize: sz, color: bodyColor, breakLine: i < d.bullets.length - 1 } });
    } else {
      richItems.push({ text: b, options: { bullet: true, fontFace: D.b, fontSize: sz, color: bodyColor, breakLine: i < d.bullets.length - 1 } });
    }
  });
  s.addText(richItems, { x: 0.7, y: 1.2, w: 8.6, h: 3.2, margin: 0, valign: "middle", paraSpaceAfter: 10 });
  if (d.stat) {
    const statColor = isDark ? D.accent : D.accent;
    s.addText(d.stat, { x: 0.5, y: 4.15, w: 9, h: 0.35, fontFace: D.b, fontSize: 12, color: statColor, italic: true, margin: 0 });
  }
  if (d.takeaway) addTakeaway(pres, s, d.takeaway, { dark: isDark });
  if (d.source) addSourceCite(pres, s, d.source, { dark: isDark });
  s.addNotes(d.notes || "");
  return s;
}
```

Key changes: supports `dark` flag, uses `bodyColor` based on dark/light, footer replaced.

**Step 11: Update threeCol helper**

```javascript
function threeCol(pres, d) {
  const isDark = d.dark || false;
  const s = isDark ? darkSlide(pres) : lightSlide(pres);
  addHeadline(s, d.headline, { dark: isDark });
  const cardFill = isDark ? D.darkCard : D.card;
  const bodyColor = isDark ? D.textDark : D.text;
  d.columns.forEach((col, i) => {
    const x = 0.5 + i * 3.1;
    addCard(pres, s, x, 1.2, 2.8, 3.2, cardFill);
    addBar(pres, s, x, 1.2, 3.2, col.accent || D.accent);
    if (col.icon) s.addImage({ data: col.icon, x: x + 1.0, y: 1.35, w: 0.6, h: 0.6 });
    s.addText(col.title, { x: x + 0.2, y: col.icon ? 2.1 : 1.35, w: 2.4, h: 0.5, fontFace: D.h, fontSize: 15, color: bodyColor, bold: true, align: "center", margin: 0, valign: "top" });
    s.addText(col.body, { x: x + 0.2, y: col.icon ? 2.6 : 1.9, w: 2.4, h: col.icon ? 1.6 : 2.3, fontFace: D.b, fontSize: 13, color: bodyColor, margin: 0, valign: "top" });
  });
  if (d.takeaway) addTakeaway(pres, s, d.takeaway, { dark: isDark });
  if (d.source) addSourceCite(pres, s, d.source, { dark: isDark });
  s.addNotes(d.notes || "");
  return s;
}
```

**Step 12: Run generation to verify**

Run: `node generate-deck.js`
Expected: May fail because slides still use old `footer`/`sources` properties. That's expected — we'll fix those in subsequent tasks.

Actually — to keep the script generating at each step, we should update the utility function signatures to be backwards-compatible during the transition. **Add temporary shims:**

```javascript
// TEMPORARY SHIM — remove after all slides are updated
function addFooter(s, text) {
  // Old footer calls become no-ops during transition
  // Content will be re-assigned to takeaway/source in subsequent tasks
  s.addText(text, { x: 0.5, y: 5.0, w: 9, h: 0.45, fontFace: D.b, fontSize: 11, color: D.muted, italic: true, margin: 0 });
}
function addSource(s, text) {
  s.addText(text, { x: 0.5, y: 5.25, w: 9, h: 0.25, fontFace: D.b, fontSize: 9, color: D.muted, margin: 0 });
}
```

Also keep the old `footer`/`sources` property handling in helpers alongside the new `takeaway`/`source` until all slides are migrated:

In each helper (wrongRight, twoCol, etc.), add at the end:
```javascript
// Legacy support during migration
if (!d.takeaway && d.footer) addFooter(s, d.footer);
if (!d.source && d.sources) addSource(s, d.sources);
```

Run: `node generate-deck.js`
Expected: Generates successfully with 47 slides.

**Step 13: Commit**

```bash
git add generate-deck.js
git commit -m "refactor: rewrite utility functions for dark-forward design system

New helpers: addTakeaway, addSourceCite, addFooterSep, addDarkCard,
addGlassCard, breatherSlide. Updated darkSlide with radial glow,
sectionDivider with 54pt hero type, singleMsg defaulting to dark.
Legacy shims kept for migration."
```

---

### Task 3: Update Slides 1–6 + Add Breather (Level 0)

**Files:**
- Modify: `generate-deck.js` — slides 1-6 section (~lines 229-348)

**Step 1: Update Slide 1 (Title)**

Already dark. Key changes:
- Title font size: 40 → 44pt (larger hero feel)
- Subtitle color: stays `D.accent`
- Card: use `addDarkCard` instead of `addCard(pres, s, ..., D.darkCard)`
- Body text on card: `D.textDark` ("CCCCCC" → "E0E4E8")
- **Add image placeholder:** Before the card, add a full-bleed placeholder rectangle at x=0, y=0, w=10, h=5.625, fill `0A0A15` with transparency 40. Label it `[AI IMAGE: person + glowing interface]`. This gets replaced when user provides an image.
- Remove old footer text. Add notes referencing slide 51 (was 46, +5 breathers).

**Step 2: Update Slide 2 (Spectrum)**

Stays LIGHT — the 4 icon cards need contrast. Changes:
- Headline: automatically bigger via updated `addHeadline`
- Text colors: `D.text` values automatically update from `1E1E1E` → `1E293B`
- Bottom milestone text: keep as-is (it's a key narrative element)
- No footer change needed (doesn't have one)

**Step 3: Update Slide 3 (Shallow End) → DARK**

Convert from `lightSlide` to `darkSlide`. Changes:
- Replace `lightSlide(pres)` with `darkSlide(pres)`
- Headline: `addHeadline(s, "...", { dark: true })`
- Card: `addDarkCard(pres, s, 1.5, 1.2, 7, 2.8)` instead of white card
- Stat number color: stays `D.accent` (pops on dark)
- Body text: `D.textDark`
- Muted text: `D.mutedDark`
- Wrong text color stays `D.wrong` (red pops on dark fine)
- Footer becomes: `addSourceCite(pres, s, "DataReportal 2026 · Reuters", { dark: true })`
- Add takeaway: `addTakeaway(pres, s, "AI has mass reach — but almost nobody is going deep.", { dark: true })`

**Step 4: Update Slide 4 (Movie Before) → DARK**

Convert to dark. Changes:
- `darkSlide(pres)`, headline `{ dark: true }`
- Timeline line: stays accent color
- Circle nodes: stay accent colors (visible on dark)
- Text colors: decade → `D.mutedDark`, era name → `D.textDark`, stat → `D.textDark`, source → `D.mutedDark`
- Old `addFooter` "Every era had skeptics..." → `addTakeaway(pres, s, "Every era had skeptics. Every era punished those who waited.", { dark: true })`

**Step 5: Update Slide 5 (AI Moment) → DARK**

Convert to dark. Changes:
- `darkSlide(pres)`, headline `{ dark: true }`
- Cards: `addDarkCard` instead of `addCard`
- Body text: `D.textDark`
- Old footer "This isn't coming..." → `addTakeaway(pres, s, "The gap between 'we have AI' and 'we use AI well' is your opportunity.", { dark: true })`
- Source texts inside cards: `D.mutedDark`

**Step 6: Update Slide 6 (Barrier) → DARK**

Already uses `singleMsg`, which now defaults to dark. Changes:
- Remove `dark: false` if present (or just let it default)
- `footer` property → `takeaway` property
- The footer text "Level 1: Let's start by understanding..." is transition text → move to breather slide

**Step 7: Add Breather Slide after Slide 6**

```javascript
breatherSlide(pres,
  "Alright — let's see what most people get wrong.",
  "Pause. Let the pacing shift. This is the transition from 'why AI matters' to 'here's how to use it.'"
);
```

**Step 8: Run and verify**

Run: `node generate-deck.js`
Expected: Generates successfully. Now has 48 slides (47 + 1 breather).

**Step 9: Commit**

```bash
git add generate-deck.js
git commit -m "feat: convert slides 1-6 to dark-forward + add first breather

Title slide gets image placeholder area. Stats/timeline slides
converted to dark backgrounds. Footer text migrated to takeaway/source
system. First breather slide added after Level 0."
```

---

### Task 4: Update Slides 7–13 + Add Breather (Level 1 + Level 2 start)

**Files:**
- Modify: `generate-deck.js` — slides 7-13 section

**Step 1: Update Slide 7 (Buzzword Blizzard)**

Already dark. Changes:
- Word colors: bold words stay `D.white`, non-bold change from `"888888"` to `D.mutedDark`
- Bottom text "Yeah. Exactly." — use `D.mutedDark` color

**Step 2: Update Slide 8 (Let's Answer Some)**

Already dark. Changes:
- Dimmed word color: `"444466"` → `"2A2A4E"` (match dark card color for very subtle)
- Question callout boxes: keep accent fill
- Bottom text: `D.textDark`

**Step 3: Update Slide 9 (AI Stack) → Keep LIGHT**

This stays light (complex layered diagram needs contrast). Changes:
- Colors auto-update via D constants
- Body text: `D.text` (now `1E293B`)
- Bottom summary: keep accent color, bump to 13pt

**Step 4: Update Slide 10 (Who Makes What) → Keep LIGHT**

Stays light (table needs contrast). Changes:
- Colors auto-update
- Table header: already uses `D.accent` fill

**Step 5: Update Slide 11 (Where Real Action Is)**

Currently uses `twoCol`. Changes:
- Keep light (comparison needs contrast)
- `footer` → `takeaway`: "The real action is in how models are used — and that's where you come in."
- `sources` → remove (none needed)

**Step 6: Update Slide 12 (Software Engineering Was First)**

Uses `twoCol`. Changes:
- Keep light
- `footer` → `takeaway`: "Engineers went first, made all the mistakes, and learned what works."
- `sources` → `source`: "Second Talent · Addy Osmani · Karpathy coined 'vibe coding' Feb 2025"

**Step 7: Update Slide 13 (Your Job Is Next)**

Currently light. Changes:
- Convert to dark: `darkSlide(pres)`, `addHeadline(s, "...", { dark: true })`
- Card: `addDarkCard` instead of `addCard`
- Text colors: `D.textDark` for body, stat stays `D.accent`
- Tool boxes: `addDarkCard` with smaller dimensions, text `D.textDark`
- Footer "If you were a Skeptic..." → `addTakeaway(pres, s, "If you were a Skeptic, you're now a Questioner — you know what AI is.", { dark: true })`

**Step 8: Add Breather Slide after Slide 13**

```javascript
breatherSlide(pres,
  "You've got the basics. Now let's give you the skills.",
  "Transition from Level 1 (understanding) to Level 2 (using). Pacing breath."
);
```

**Step 9: Run, verify, commit**

Run: `node generate-deck.js`
Expected: 49 slides (47 + 2 breathers).

```bash
git add generate-deck.js
git commit -m "feat: update slides 7-13 + add Level 2 breather

Buzzword slides use updated dark palette. Slide 13 converted to dark.
Footer text migrated to takeaway system. Second breather added."
```

---

### Task 5: Update Slides 14–21 (Level 2 Iterations)

**Files:**
- Modify: `generate-deck.js` — slides 14-21 section

**Step 1: Update Slide 14 (Section Divider)**

Uses `sectionDivider` which is already updated. Just verify the level label renders correctly with charSpacing: 4.

**Step 2: Update Slide 15 (The Task)**

Uses `twoCol`. Changes:
- Keep light
- `footer` → `takeaway`: "Sound familiar? Let's see how changing only the words transforms the output."

**Step 3: Update Slides 16-20 (Wrong/Right iterations)**

All use `wrongRight` helper which is already updated. For each iteration, migrate:
- `footer` → `takeaway` (the key insight per slide)
- `sources` → `source` (where applicable)

Go through each iteration object in the `iterations` array and rename properties:
- Iteration 1 (Assign a Role): `footer` → `takeaway`
- Iteration 2 (Be Specific): `footer` → `takeaway`
- Iteration 3 (One Task): `footer` → `takeaway`, `sources` → `source`
- Iteration 4 (Power Keywords): `footer` → `takeaway`, `sources` → `source`
- Iteration 5 (Define Output): `footer` → `takeaway`

**Step 4: Update Slide 21 (5x Prompt)**

Uses `twoCol`. Changes:
- Keep light
- `footer` → `takeaway`: "Same task. Same background info. Dramatically different result."

**Step 5: Run, verify, commit**

Run: `node generate-deck.js`
Expected: Still 49 slides. Footer text now appears as takeaway strips on Wrong/Right slides.

```bash
git add generate-deck.js
git commit -m "feat: migrate Level 2 slides to new footer hierarchy

Wrong/Right iteration slides use takeaway strips for key insights.
Source citations moved to right-aligned metadata zone."
```

---

### Task 6: Update Slides 22–26 (Level 3) → DARK

**Files:**
- Modify: `generate-deck.js` — slides 22-26 section

**Step 1: Update Slide 22 (Same Prompt, Different Context)**

Uses `twoCol`. Changes:
- Add `dark: true` to make it a dark slide
- Card fills: left stays default dark card, right uses `D.rightBg` (stays green-tinted even on dark — this is a comparison)
- `footer` → `takeaway`: "Same prompt. Different information. Dramatically different result."
- `sources` → `source`

**Step 2: Update Slide 23 (Meet Your AI Colleague / Dory) → DARK + Image**

Complete rewrite as dark asymmetric slide:
- `darkSlide(pres)`, `addHeadline(s, "Meet Your AI Colleague", { dark: true })`
- **Dory image area:** Replace the fish icon + oval with a placeholder rectangle: `addDarkCard(pres, s, 0.5, 1.2, 3.5, 3.2)` with a centered text label `[DORY IMAGE]` in mutedDark
- Right text card: `addDarkCard` instead of white card
- All text colors: `D.textDark` for body, `D.accent` for "Your AI Colleague"
- `footer` → `takeaway`: "Level 2 = words. Level 3 = information."

**Step 3: Update Slide 24 (Attention Problem) → DARK**

Uses `threeCol`. Changes:
- Add `dark: true`
- `footer` → `takeaway`: "The problem isn't that AI is dumb. It's the context."
- Stat text with source: split into `source` property

**Step 4: Update Slide 25 (Let AI Tell You) → DARK**

Uses `twoCol`. Changes:
- Add `dark: true`
- `footer` → `takeaway`
- `sources` → `source`

**Step 5: Update Slide 26 (Goldilocks + Persona Milestone) → DARK**

Rewrite as dark slide:
- `darkSlide(pres)`
- Main text: color `D.white` (was `D.text`)
- Sub text: color `D.mutedDark` (was `D.muted`)
- Persona milestone card: `addGlassCard(pres, s, 1.5, 3.8, 7, 1.0)` instead of light blue card
- Persona text colors: `D.accent` for labels, `D.textDark` for body
- `addSourceCite(pres, s, "CIO", { dark: true })`

**Step 6: Run, verify, commit**

```bash
git add generate-deck.js
git commit -m "feat: convert Level 3 slides to dark + add Dory placeholder

Same Prompt/Dory/Attention/Goldilocks slides now dark-forward.
Glass card for persona milestone. Dory image placeholder ready
for real screenshot."
```

---

### Task 7: Update Slides 27–32 + Add Breather (Level 4) → DARK

**Files:**
- Modify: `generate-deck.js` — slides 27-32 section

**Step 1: Update Slide 27 (Copy-Paste Trap) → DARK**

Rewrite as dark:
- `darkSlide(pres)`, headline `{ dark: true }`
- Step circles: keep `D.wrong` fill (red visible on dark)
- Step text: `D.textDark`
- Problems card: `addCard(pres, s, 6.0, 1.2, 3.5, 2.8, D.wrongBg)` — keep red background (it pops on dark)
- `footer` → `takeaway`: "You're using a Ferrari to carry groceries."

**Step 2: Update Slide 28 (Hand Dory the Keys) → DARK**

Similar dark conversion:
- Step circles: green/accent stays visible on dark
- Insight card: keep green bg
- `footer` → `takeaway`: "Human moved from 'operator at every step' to 'reviewer at the end.'"

**Step 3: Update Slide 29 (Connections) → DARK**

Rewrite as dark:
- `darkSlide(pres)`, headline `{ dark: true }`
- Connection cards: `addDarkCard` instead of white cards
- Icon ovals: change from `"E0F2FE"` to accent at 90% transparency for a subtle glow
- Label text: `D.textDark`, desc text: `D.mutedDark`
- `footer` → `takeaway`: "Give Dory a phone, a filing cabinet, and a library card."

**Step 4: Update Slide 30 (Proposal With Connections)**

Uses `twoCol`. Keep the red/green comparison visible:
- Add `dark: true` but keep the left/right card bg colors (`wrongBg`/`rightBg`)
- `footer` → `takeaway`

**Step 5: Update Slide 31 (Trust But Verify) → DARK**

Uses `bulletSlide`. Changes:
- Add `dark: true`
- `footer` → `takeaway`: "Love Dory. Fact-check Dory."

**Step 6: Update Slide 32 (Hands on Wheel + Persona Milestone) → DARK**

Rewrite as dark:
- `darkSlide(pres)`, headline `{ dark: true }`
- Bullet text: `D.textDark`
- Footer → takeaway: "AI is a power tool, not autopilot."
- Persona card: `addGlassCard` instead of light blue card
- Persona text: `D.textDark` body, `D.accent` labels

**Step 7: Add Breather Slide after Slide 32**

```javascript
breatherSlide(pres,
  "You're managing AI well. Time to orchestrate it.",
  "The final level transition. Single agent → multi-agent. Chef → kitchen brigade."
);
```

**Step 8: Run, verify, commit**

Expected: 50 slides now (47 + 3 breathers).

```bash
git add generate-deck.js
git commit -m "feat: convert Level 4 slides to dark + add orchestration breather

Copy-Paste/Keys/Connections/Trust slides dark-forward. Glass cards
for persona milestones. Third breather slide before Level 5."
```

---

### Task 8: Update Slides 33–40 (Level 5) → DARK

**Files:**
- Modify: `generate-deck.js` — slides 33-40 section

**Step 1: Update Slide 33 (Kitchen Brigade)**

Uses `twoCol`. Changes:
- Add `dark: true`
- `footer` → `takeaway`: "The trick isn't making one AI smarter. It's making many AIs work together."

**Step 2: Update Slide 34 (Prompt Chaining) → DARK**

Complete rewrite as dark:
- `darkSlide(pres)`, headline `{ dark: true }`
- Phase boxes: keep colored fills (they pop on dark)
- Arrow text: `D.accent`
- Output labels: `D.mutedDark`
- Principle cards: `addDarkCard`
- Card text: `D.textDark` for body, `D.textDark` for header
- Phase 0 callout: keep yellow card (`"FEF3C7"`) — it contrasts dramatically against dark bg (intentional)
- **Add kitchen image placeholder:** Before the phase boxes, add: `addDarkCard(pres, s, 8.5, 0.3, 1.2, 0.8)` with text `[KITCHEN IMAGE]`

Actually, the kitchen image should be on slide 33 (Kitchen Brigade), not 34. Move image placeholder to step 1.

**Step 3: Update Slide 35 (Chain Rule)**

Uses `singleMsg` which now defaults to dark. Change:
- Remove any `dark: false` if present
- `footer` → remove (no footer on this slide)

**Step 4: Update Slide 36 (Skills: Every Chef's Playbook) → DARK**

Rewrite as dark:
- `darkSlide(pres)`, headline `{ dark: true }`
- Subtitle: `D.accent`
- Definition card: `addDarkCard`
- Connection card: `addDarkCard`
- Fish icon: use `fishW` (white variant) instead of `fish` (teal)
- Body text: `D.textDark`
- Stat: `D.accent`
- `addSourceCite(pres, s, "CodeConductor", { dark: true })`

**Step 5: Update Slide 37 (Skills in Action) → DARK**

Uses `threeCol`. Changes:
- Add `dark: true`
- `footer` → `takeaway`: "With skills, each agent already knows its specialty."

**Step 6: Update Slide 38 (Why Skills) → DARK**

Uses `bulletSlide`. Changes:
- Add `dark: true`
- Footer → remove (stat text serves as takeaway)

**Step 7: Update Slide 39 (Same Concept) → Already defaults dark**

Uses `singleMsg`. Verify it renders on dark by default now.

**Step 8: Update Slide 40 (GPS Not Directions) → DARK**

Uses `twoCol`. Changes:
- Add `dark: true`
- `footer` → `takeaway`: long transition text needs editing. Shorten to: "Prompt engineering is manual directions. Context engineering + skills is programming a GPS."

**Step 9: Run, verify, commit**

```bash
git add generate-deck.js
git commit -m "feat: convert Level 5 slides to dark

Kitchen/Chaining/Skills/GPS slides dark-forward. White icon
variants for dark backgrounds. Takeaway system throughout."
```

---

### Task 9: Update Slides 41–47 + Add Breathers (Payoff + Closing)

**Files:**
- Modify: `generate-deck.js` — slides 41-47 + closing section

**Step 1: Update Slide 41 (Manual Way) → DARK**

Rewrite as dark:
- `darkSlide(pres)`, headline `{ dark: true }`
- Step circles: keep `D.wrong` fill (red visible on dark)
- Step text: `D.textDark`
- Time text: `D.wrong`
- Bottom line: keep `D.wrong`
- Total text: `D.wrong` bold
- No footer needed (the "1.5 hours" IS the takeaway)

**Step 2: Update Slide 42 (Chained Way) → DARK**

Rewrite as dark:
- `darkSlide(pres)`, headline `{ dark: true }`
- Agent cards: `addDarkCard` instead of white cards
- Label colors: keep per-agent colors
- Prompt text: `D.textDark`
- Output text: keep per-agent colors
- Skills compounding card: `addGlassCard` instead of light blue card
- Text: `D.accent` for bold, `D.textDark` for body
- `footer` → `takeaway`: "Same proposal. 15 minutes of judgment instead of 1.5 hours of grunt work."

**Step 3: Update Slide 43 (From Asking to Orchestrating) → DARK**

Rewrite as dark:
- `darkSlide(pres)`, headline `{ dark: true }`
- Stage cards: `addDarkCard`
- Labels: keep per-stage colors
- Arrow bar: stays accent
- Bridge text: keep per-stage colors
- Closing card: `addGlassCard` instead of light blue
- `footer` → remove (the closing card IS the takeaway)

**Step 4: Update Slide 44 (AI Toolkit) → DARK**

Rewrite as dark:
- `darkSlide(pres)`, headline `{ dark: true }`
- Table: header row keeps accent fill, body cells get `color: D.textDark`
- Table border: `"3A3A5E"` (subtle on dark, vs `D.tableBorder` which is too light)
- No footer needed

**Step 5: Update Slide 45 (30-Day Challenge) → DARK**

Rewrite as dark:
- `darkSlide(pres)`, headline `{ dark: true }`
- Subtitle: `D.accent`
- Timeline bar: stays accent
- Node circles: keep per-week colors
- Cards: `addDarkCard`
- Card text: `D.textDark` for body, per-week colors for labels
- `footer` → `takeaway`: "Four weeks. One task. Same journey this deck just took you on."

**Step 6: Add Breather Slide before Slide 46**

```javascript
breatherSlide(pres,
  "Let's come back to where we started.",
  "Emotional reset before the callback. Let the audience prepare for the full-circle moment."
);
```

**Step 7: Update Slide 46 (Full Circle)**

Already dark. Changes:
- Title: bump to 40pt (was 32pt)
- Body text: `D.textDark` (was "CCCCCC")
- Journey items: `D.textDark` body, `D.accent` persona labels, `D.mutedDark` level refs
- Closing text: stays `D.accent`

**Step 8: Update Slide 47 (Now Go Try It)**

Already dark. Changes:
- Main text: `D.white` (hero treatment), consider bumping to 30pt
- CTA text: stays `D.accent`
- Deck title at bottom: `D.mutedDark`
- **Add image placeholder:** Before main text, add full-bleed placeholder like slide 1

**Step 9: Run, verify, commit**

Expected: 51 slides (47 original + 4 breathers).

```bash
git add generate-deck.js
git commit -m "feat: convert payoff/closing slides to dark + add closing breather

Manual/Chained/Orchestrating comparison on dark. Glass cards for
persona milestones. Fourth breather before full-circle callback.
51 total slides."
```

---

### Task 10: Add 5th Breather + Remove Legacy Shims + Final Cleanup

**Files:**
- Modify: `generate-deck.js` — throughout

**Step 1: Add 5th breather after Slide 21 (end of Level 2)**

```javascript
breatherSlide(pres,
  "You've changed the words. Now let's change the information.",
  "Transition from Level 2 (prompt engineering) to Level 3 (context engineering)."
);
```

This goes right before the Level 3 section comment.

**Step 2: Remove legacy shim functions**

Delete `addFooter` and `addSource` functions. Search for any remaining calls:
- Run grep for `addFooter(` and `addSource(` — all should be gone
- If any remain, convert to `addTakeaway`/`addSourceCite`

**Step 3: Remove legacy property handling in helpers**

In `wrongRight`, `twoCol`, `bulletSlide`, `threeCol`, `singleMsg` — remove the backwards-compatible `d.footer`/`d.sources` fallback lines.

**Step 4: Update console.log at end**

Change the slide count message:
```javascript
console.log("Done! Created Getting-Agents-to-Give-Up-Their-Secrets.pptx (52 slides, v3)");
```

**Step 5: Run, verify, commit**

Run: `node generate-deck.js`
Expected: 52 slides. No errors.

```bash
git add generate-deck.js
git commit -m "feat: add Level 3 breather + remove legacy footer shims

Fifth breather after Level 2. All slides migrated to takeaway/source
footer system. Legacy addFooter/addSource removed. 52 total slides."
```

---

### Task 11: Content QA

**Step 1: Run markitdown to verify all content**

```bash
python -m markitdown Getting-Agents-to-Give-Up-Their-Secrets.pptx
```

**Step 2: Verify:**
- All 52 slides present (47 content + 5 breathers)
- No placeholder text like "xxxx" or "lorem"
- Breather slides appear in correct positions
- No orphaned footer text (everything should be either takeaway or source)
- Content ordering matches the deck plan

**Step 3: Check for legacy references**

```bash
python -m markitdown Getting-Agents-to-Give-Up-Their-Secrets.pptx | grep -iE "xxxx|lorem|placeholder|slide 46|slide 47|slide 49|slide 50"
```

The old slide references should be updated to new numbers if they appear in notes.

---

### Task 12: Code-Level Layout QA

**Step 1: Launch a subagent for layout analysis**

Have the subagent read all of `generate-deck.js` and verify:
- No element extends beyond x=0 or x>10 (slide width)
- No element extends beyond y=0 or y>5.625 (slide height)
- No overlapping elements (bottom of one > top of next)
- Takeaway strips don't collide with source citations
- Glass cards have sufficient contrast
- All dark slides have the glow oval added FIRST (before content)
- Shadow allowance: elements with shadows need >0.1" clearance

**Step 2: Fix any issues found**

**Step 3: Re-generate and verify**

```bash
node generate-deck.js
python -m markitdown Getting-Agents-to-Give-Up-Their-Secrets.pptx | head -5
```

**Step 4: Final commit**

```bash
git add generate-deck.js
git commit -m "fix: resolve layout QA issues from visual overhaul"
```

---

## Image Placeholders — User Action Required

After the visual overhaul is complete, the user needs to provide:

1. **Dory screenshot** — a headshot/cropped still of Dory from Finding Nemo. Save as `images/dory.png`
2. **AI-generated images** — using these prompts:
   - Title slide: "Person illuminated by a glowing AI interface in a dark room, cinematic lighting, shallow depth of field, teal and navy color palette"
   - Kitchen Brigade: "Professional kitchen seen from above, chefs at organized stations, dark moody lighting"
   - Closing slide: "Person confidently working with a glowing AI interface, warm teal glow, cinematic"

Save images in `images/` directory, then update `generate-deck.js` to load them via `path:` instead of the placeholder rectangles.

---

## Summary of Changes

| Metric | Before | After |
|--------|--------|-------|
| Total slides | 47 | 52 |
| Dark slides | ~10 | ~40 |
| Light slides | ~37 | ~12 |
| Footer styles | 1 (ambiguous) | 3 (takeaway / separator / source) |
| Card variants | 1 | 4 (standard, dark, glass, callout) |
| Headline size | 28pt | 40pt |
| Section title size | 36pt | 54pt |
| Body text size | 13-14pt | 15-16pt |
| Background depth | Flat | Radial glow |
| Imagery | 0 | 5+ placeholders |
| Breather slides | 0 | 5 |
